import{ADD_TESTS,defineJestParameter}from"./chunk-47NOC73U.mjs";import{addons}from"@storybook/preview-api";import{normalize,sep}from"upath";var findTestResults=(testFiles,jestTestResults,jestTestFilesExt)=>Object.values(testFiles).map(name=>{let fileName=`${sep}${name}${jestTestFilesExt}`;if(jestTestResults&&jestTestResults.testResults){let fileNamePattern=new RegExp(fileName);return{fileName,name,result:jestTestResults.testResults.find(test=>Boolean(normalize(test.name).match(fileNamePattern)))}}return{fileName,name}}),emitAddTests=({kind,story,testFiles,options})=>{addons.getChannel().emit(ADD_TESTS,{kind,storyName:story,tests:findTestResults(testFiles,options.results,options.filesExt)})},withTests=userOptions=>{let options={...{filesExt:"((\\.specs?)|(\\.tests?))?(\\.[jt]sx?)?$"},...userOptions};return(...args)=>{let[storyFn,{kind,parameters={}}]=args,testFiles=defineJestParameter(parameters);return testFiles!==null&&emitAddTests({kind,story:storyFn,testFiles,options}),storyFn()}};module&&module.hot&&module.hot.decline&&module.hot.decline();export{withTests};
